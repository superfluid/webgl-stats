<!DOCTYPE html>
<html>
	<head>
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script src="https://www.googletagmanager.com/gtag/js"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());

			(function(){
				var accountIds = {
					account1: 'UA-178010779-1',
					account2: 'UA-178078874-1',
				}
				gtag('config', accountIds.account1, {
					'custom_map': {
						'dimension1': 'webgl1',
						'dimension2': 'webgl2',
						'dimension3': 'webgpu',

						'dimension4': 'ANGLE_instanced_arrays',
						'dimension5': 'EXT_blend_minmax',
						'dimension6': 'EXT_clip_cull_distance',
						'dimension7': 'EXT_color_buffer_float',
						'dimension8': 'EXT_color_buffer_half_float',
						'dimension9': 'EXT_disjoint_timer_query',
						'dimension10': 'EXT_disjoint_timer_query_webgl2',
						'dimension11': 'EXT_float_blend',
						'dimension12': 'EXT_frag_depth',
						'dimension13': 'EXT_shader_framebuffer_fetch',
						'dimension14': 'EXT_shader_texture_lod',
						'dimension15': 'EXT_sRGB',
						'dimension16': 'EXT_texture_compression_bptc',
						'dimension17': 'EXT_texture_compression_rgtc',
						'dimension18': 'EXT_texture_filter_anisotropic',
						'dimension19': 'EXT_texture_norm16',
						'dimension20': 'KHR_parallel_shader_compile',

						'metric1': 'MAX_COMBINED_TEXTURE_IMAGE_UNITS',
						'metric2': 'MAX_CUBE_MAP_TEXTURE_SIZE',
						'metric3': 'MAX_FRAGMENT_UNIFORM_VECTORS',
						'metric4': 'MAX_TEXTURE_IMAGE_UNITS',
						'metric5': 'MAX_RENDERBUFFER_SIZE',
						'metric6': 'MAX_TEXTURE_SIZE',
						'metric7': 'MAX_VARYING_VECTORS',
						'metric8': 'MAX_VERTEX_ATTRIBS',
						'metric9': 'MAX_VERTEX_TEXTURE_IMAGE_UNITS',
						'metric10': 'MAX_VERTEX_UNIFORM_VECTORS',
					}
				});
				gtag('config', accountIds.account2, {
					'custom_map': {
						'dimension1': 'OES_draw_buffers_indexed',
						'dimension2': 'OES_element_index_uint',
						'dimension3': 'OES_fbo_render_mipmap',
						'dimension4': 'OES_standard_derivatives',
						'dimension5': 'OES_texture_float',
						'dimension6': 'OES_texture_float_linear',
						'dimension7': 'OES_texture_half_float',
						'dimension8': 'OES_texture_half_float_linear',
						'dimension9': 'OES_vertex_array_object',
						'dimension10': 'OVR_multiview2',
						'dimension11': 'WEBGL_blend_equation_advanced_coherent',
						'dimension12': 'WEBGL_color_buffer_float',
						'dimension13': 'WEBGL_compressed_texture_astc',
						'dimension14': 'WEBGL_compressed_texture_etc',
						'dimension15': 'WEBGL_compressed_texture_etc1',
						'dimension16': 'WEBGL_compressed_texture_pvrtc',
						'dimension17': 'WEBGL_compressed_texture_s3tc',
						'dimension18': 'WEBGL_compressed_texture_s3tc_srgb',
						'dimension19': 'WEBGL_debug',
						'dimension20': 'WEBGL_debug_renderer_info',
					}
				});

				var gl1 = document.createElement('canvas').getContext('webgl');
				var gl2 = document.createElement('canvas').getContext('webgl2');
				var wgpu = document.createElement('canvas').getContext('gpu') | document.createElement('canvas').getContext('gpu-present'); // subject to change

				var data = {
					'webgl1': gl1 != null, // webgl1 supported
					'webgl2': gl2 != null, // webgl2 supported
					'webgpu': wgpu != null, // webgpu supported
				}

				if (gl1 != null) {
					var extensions = [
						'ANGLE_instanced_arrays',
						'EXT_blend_minmax',
						'EXT_clip_cull_distance',
						'EXT_color_buffer_float',
						'EXT_color_buffer_half_float',
						'EXT_disjoint_timer_query',
						'EXT_disjoint_timer_query_webgl2',
						'EXT_float_blend',
						'EXT_frag_depth',
						'EXT_shader_framebuffer_fetch',
						'EXT_shader_texture_lod',
						'EXT_sRGB',
						'EXT_texture_compression_bptc',
						'EXT_texture_compression_rgtc',
						'EXT_texture_filter_anisotropic',
						'EXT_texture_norm16',
						'KHR_parallel_shader_compile',
						'OES_draw_buffers_indexed',
						'OES_element_index_uint',
						'OES_fbo_render_mipmap',
						'OES_standard_derivatives',
						'OES_texture_float',
						'OES_texture_float_linear',
						'OES_texture_half_float',
						'OES_texture_half_float_linear',
						'OES_vertex_array_object',
						'OVR_multiview2',
						'WEBGL_blend_equation_advanced_coherent',
						'WEBGL_color_buffer_float',
						'WEBGL_compressed_texture_astc',
						'WEBGL_compressed_texture_etc',
						'WEBGL_compressed_texture_etc1',
						'WEBGL_compressed_texture_pvrtc',
						'WEBGL_compressed_texture_s3tc',
						'WEBGL_compressed_texture_s3tc_srgb',
						'WEBGL_debug',
						'WEBGL_debug_renderer_info',
						'WEBGL_debug_shaders',
						'WEBGL_depth_texture',
						'WEBGL_draw_buffers',
						'WEBGL_draw_instanced_base_vertex_base_instance',
						'WEBGL_dynamic_texture',
						'WEBGL_lose_context',
						'WEBGL_multi_draw',
						'WEBGL_multi_draw_instanced_base_vertex_base_instance',
						'WEBGL_subarray_uploads',
						'WEBGL_texture_multisample',
						'WEBGL_texture_source_iframe',
						'WEBGL_video_texture',
					];

					for (var i = 0; i < extensions.length; i++) {
						data[extensions[i]] = gl1.getExtension(extensions[i]) != null;
					}

					var params = [
						'MAX_COMBINED_TEXTURE_IMAGE_UNITS',
						'MAX_CUBE_MAP_TEXTURE_SIZE',
						'MAX_FRAGMENT_UNIFORM_VECTORS',
						'MAX_TEXTURE_IMAGE_UNITS',
						'MAX_RENDERBUFFER_SIZE',
						'MAX_TEXTURE_SIZE',
						'MAX_VARYING_VECTORS',
						'MAX_VERTEX_ATTRIBS',
						'MAX_VERTEX_TEXTURE_IMAGE_UNITS',
						'MAX_VERTEX_UNIFORM_VECTORS',
						// 'MAX_VIEWPORT_DIMS_X': ['account1', 'metric11'],
						// 'MAX_VIEWPORT_DIMS_Y': ['account1', 'metric12'],
					];

					for (var i = 0; i < params.length; i++) {
						data[params[i]] = gl1.getParameter(gl1[params[i]]);
					}
				}

				console.log(data);
				gtag('event', 'pageview', data);
			})();
		</script>
	</head>
	<body>
		<h1>Hello World</h1>
	</body>
</html>